{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = middleware;\n\nvar _actions = require('./actions');\n\nvar _utils = require('./utils');\n\nfunction getToken(state, name) {\n  var tooltips = state.tooltip;\n  var tooltip = tooltips[name];\n\n  if (tooltip) {\n    return tooltip.timeout;\n  }\n}\n\nvar CANCEL_TYPES = [_actions.SHOW, _actions.HIDE];\n\nfunction middleware(store) {\n  return function (next) {\n    return function (action) {\n      var names = (0, _utils.resolve)(action);\n\n      if (CANCEL_TYPES.indexOf(action.type) !== -1) {\n        // Clear timeout\n        names.forEach(function (name) {\n          var token = getToken(store.getState(), name);\n          token && clearTimeout(token);\n        });\n      }\n\n      if (!action.meta || !action.meta[_actions.DELAY]) {\n        return next(action);\n      } // Setup timeout\n\n\n      var _action$meta$DELAY = action.meta[_actions.DELAY],\n          duration = _action$meta$DELAY.duration,\n          callback = _action$meta$DELAY.callback;\n      names.forEach(function (name) {\n        var newToken = setTimeout(function () {\n          // Ignore if token is cleared\n          var token = getToken(store.getState(), name);\n\n          if (token !== null) {\n            // Clear timeout token\n            next((0, _actions.endTimeout)({\n              name: name\n            })); // Dispatch original action\n\n            delete action.meta[_actions.DELAY];\n            next(action); // Notify via callback\n\n            callback && callback(action.type, duration, action);\n          }\n        }, duration); // Store timeout token\n\n        next((0, _actions.startTimeout)({\n          name: name,\n          token: newToken\n        }));\n      });\n      return names;\n    };\n  };\n}","map":{"version":3,"sources":["/Users/a/Documents/songlistapp/spp/node_modules/redux-tooltip/lib/middleware.js"],"names":["Object","defineProperty","exports","value","default","middleware","_actions","require","_utils","getToken","state","name","tooltips","tooltip","timeout","CANCEL_TYPES","SHOW","HIDE","store","next","action","names","resolve","indexOf","type","forEach","token","getState","clearTimeout","meta","DELAY","_action$meta$DELAY","duration","callback","newToken","setTimeout","endTimeout","startTimeout"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,UAAlB;;AAEA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,WAAD,CAAtB;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,SAAD,CAApB;;AAEA,SAASE,QAAT,CAAkBC,KAAlB,EAAyBC,IAAzB,EAA+B;AAC7B,MAAIC,QAAQ,GAAGF,KAAK,CAACG,OAArB;AAEA,MAAIA,OAAO,GAAGD,QAAQ,CAACD,IAAD,CAAtB;;AACA,MAAIE,OAAJ,EAAa;AACX,WAAOA,OAAO,CAACC,OAAf;AACD;AACF;;AAED,IAAIC,YAAY,GAAG,CAACT,QAAQ,CAACU,IAAV,EAAgBV,QAAQ,CAACW,IAAzB,CAAnB;;AAEA,SAASZ,UAAT,CAAoBa,KAApB,EAA2B;AACzB,SAAO,UAAUC,IAAV,EAAgB;AACrB,WAAO,UAAUC,MAAV,EAAkB;AACvB,UAAIC,KAAK,GAAG,CAAC,GAAGb,MAAM,CAACc,OAAX,EAAoBF,MAApB,CAAZ;;AACA,UAAIL,YAAY,CAACQ,OAAb,CAAqBH,MAAM,CAACI,IAA5B,MAAsC,CAAC,CAA3C,EAA8C;AAC5C;AACAH,QAAAA,KAAK,CAACI,OAAN,CAAc,UAAUd,IAAV,EAAgB;AAC5B,cAAIe,KAAK,GAAGjB,QAAQ,CAACS,KAAK,CAACS,QAAN,EAAD,EAAmBhB,IAAnB,CAApB;AACAe,UAAAA,KAAK,IAAIE,YAAY,CAACF,KAAD,CAArB;AACD,SAHD;AAID;;AAED,UAAI,CAACN,MAAM,CAACS,IAAR,IAAgB,CAACT,MAAM,CAACS,IAAP,CAAYvB,QAAQ,CAACwB,KAArB,CAArB,EAAkD;AAChD,eAAOX,IAAI,CAACC,MAAD,CAAX;AACD,OAZsB,CAcvB;;;AACA,UAAIW,kBAAkB,GAAGX,MAAM,CAACS,IAAP,CAAYvB,QAAQ,CAACwB,KAArB,CAAzB;AAAA,UACIE,QAAQ,GAAGD,kBAAkB,CAACC,QADlC;AAAA,UAEIC,QAAQ,GAAGF,kBAAkB,CAACE,QAFlC;AAIAZ,MAAAA,KAAK,CAACI,OAAN,CAAc,UAAUd,IAAV,EAAgB;AAC5B,YAAIuB,QAAQ,GAAGC,UAAU,CAAC,YAAY;AACpC;AACA,cAAIT,KAAK,GAAGjB,QAAQ,CAACS,KAAK,CAACS,QAAN,EAAD,EAAmBhB,IAAnB,CAApB;;AACA,cAAIe,KAAK,KAAK,IAAd,EAAoB;AAClB;AACAP,YAAAA,IAAI,CAAC,CAAC,GAAGb,QAAQ,CAAC8B,UAAb,EAAyB;AAAEzB,cAAAA,IAAI,EAAEA;AAAR,aAAzB,CAAD,CAAJ,CAFkB,CAIlB;;AACA,mBAAOS,MAAM,CAACS,IAAP,CAAYvB,QAAQ,CAACwB,KAArB,CAAP;AACAX,YAAAA,IAAI,CAACC,MAAD,CAAJ,CANkB,CAQlB;;AACAa,YAAAA,QAAQ,IAAIA,QAAQ,CAACb,MAAM,CAACI,IAAR,EAAcQ,QAAd,EAAwBZ,MAAxB,CAApB;AACD;AACF,SAdwB,EActBY,QAdsB,CAAzB,CAD4B,CAiB5B;;AACAb,QAAAA,IAAI,CAAC,CAAC,GAAGb,QAAQ,CAAC+B,YAAb,EAA2B;AAAE1B,UAAAA,IAAI,EAAEA,IAAR;AAAce,UAAAA,KAAK,EAAEQ;AAArB,SAA3B,CAAD,CAAJ;AACD,OAnBD;AAqBA,aAAOb,KAAP;AACD,KAzCD;AA0CD,GA3CD;AA4CD","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = middleware;\n\nvar _actions = require('./actions');\n\nvar _utils = require('./utils');\n\nfunction getToken(state, name) {\n  var tooltips = state.tooltip;\n\n  var tooltip = tooltips[name];\n  if (tooltip) {\n    return tooltip.timeout;\n  }\n}\n\nvar CANCEL_TYPES = [_actions.SHOW, _actions.HIDE];\n\nfunction middleware(store) {\n  return function (next) {\n    return function (action) {\n      var names = (0, _utils.resolve)(action);\n      if (CANCEL_TYPES.indexOf(action.type) !== -1) {\n        // Clear timeout\n        names.forEach(function (name) {\n          var token = getToken(store.getState(), name);\n          token && clearTimeout(token);\n        });\n      }\n\n      if (!action.meta || !action.meta[_actions.DELAY]) {\n        return next(action);\n      }\n\n      // Setup timeout\n      var _action$meta$DELAY = action.meta[_actions.DELAY],\n          duration = _action$meta$DELAY.duration,\n          callback = _action$meta$DELAY.callback;\n\n      names.forEach(function (name) {\n        var newToken = setTimeout(function () {\n          // Ignore if token is cleared\n          var token = getToken(store.getState(), name);\n          if (token !== null) {\n            // Clear timeout token\n            next((0, _actions.endTimeout)({ name: name }));\n\n            // Dispatch original action\n            delete action.meta[_actions.DELAY];\n            next(action);\n\n            // Notify via callback\n            callback && callback(action.type, duration, action);\n          }\n        }, duration);\n\n        // Store timeout token\n        next((0, _actions.startTimeout)({ name: name, token: newToken }));\n      });\n\n      return names;\n    };\n  };\n}"]},"metadata":{},"sourceType":"script"}